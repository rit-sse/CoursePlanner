machine:
    node:
        version:
            6.10.1


dependencies:
    pre:
        - sudo apt update; sudo apt install default-jre
        - wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add -
        - sudo sh -c 'echo "deb http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list'
        - sudo apt-get update
        - sudo apt-get install google-chrome-stable
        - npm install
        - npm install -g bower
        - bower install
        - npm install -g gulp
        - ENVIRONMENT=prod gulp

test:
    pre: 
        - npm install -g protractor
        - npm start:
            background: true
        - webdriver-manager update
        - webdriver-manager start:
            background: true
        - sleep 5
    override:
        - npm run karma
        - protractor protractor.conf.js
